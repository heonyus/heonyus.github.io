<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TF-IDF Interactive Chart Test</title>
    <style>
        body {
            font-family: 'Roboto', -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
            max-width: 1000px;
            margin: 0 auto;
            padding: 40px 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .container {
            background: white;
            padding: 40px;
            border-radius: 16px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }
        h1 { 
            color: #1e3a8a; 
            margin-bottom: 10px;
            font-size: 2.5em;
        }
        h2 { 
            color: #475569; 
            margin-top: 30px;
            font-size: 1.8em;
            border-bottom: 3px solid #3b82f6;
            padding-bottom: 10px;
        }
        h3 {
            color: #64748b;
            font-size: 1.4em;
            margin-top: 25px;
        }
        p {
            line-height: 1.8;
            color: #334155;
        }
        .badge {
            display: inline-block;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 6px 16px;
            border-radius: 20px;
            font-size: 0.9em;
            font-weight: 600;
            margin-bottom: 20px;
        }
        
        /* Plotly ì°¨íŠ¸ ìŠ¤íƒ€ì¼ */
        #tfidf_plot { 
            background: linear-gradient(135deg, #f8fafc 0%, #ffffff 100%);
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            margin: 30px auto;
        }
        #tfidf_plot, #tfidf_plot > div { 
            width: 100% !important; 
            height: 500px !important; 
        }
        #tfidf_plot svg { 
            display: block;
            max-height: none !important; 
            pointer-events: auto !important; 
            overflow: visible !important;
        }
        #tfidf_plot .plotly .main-svg, 
        #tfidf_plot .plotly rect,
        #tfidf_plot .plotly path,
        #tfidf_plot .plotly g {
            pointer-events: auto !important;
        }
        #tfidf_plot:hover {
            box-shadow: 0 6px 30px rgba(96, 165, 250, 0.15);
            transition: box-shadow 0.3s ease;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ“Š Latent Dirichlet Allocation (2003)</h1>
        <span class="badge">Interactive Chart Test</span>
        
        <h2>Introduction</h2>
        <p>í…ìŠ¤íŠ¸ ì½”í¼ìŠ¤(corpus)ë¥¼ í™•ë¥ ì ìœ¼ë¡œ ëª¨ë¸ë§í•˜ë ¤ëŠ” ì‹œë„ëŠ” ì˜¤ë˜ì „ë¶€í„° ì´ì–´ì ¸ ì™”ë‹¤.<br>
        ê¸°ì¡´ì˜ ëŒ€í‘œì ì¸ ì ‘ê·¼ë²•ì€ ë‹¤ìŒê³¼ ê°™ë‹¤:</p>
        
        <h2>Background</h2>
        <h3>1. TF-IDF : ë¬¸ì„œë¥¼ ë‹¨ì–´ì˜ ë¹ˆë„ ë²¡í„°ë¡œ ë³€í™˜</h3>
        
        <div id="tfidf_plot"></div>
        
        <p><strong>ì •ì˜</strong>: ë‹¨ì–´ tê°€ ë¬¸ì„œ dì—ì„œ ì–¼ë§ˆë‚˜ ì¤‘ìš”í•œì§€ ì¸¡ì •í•˜ëŠ” ê°€ì¤‘ì¹˜.</p>
        
        <p style="margin-top: 30px; padding: 20px; background: #f1f5f9; border-radius: 8px; border-left: 4px solid #3b82f6;">
            <strong>ğŸ’¡ ì¸í„°ë™ì…˜ ê°€ì´ë“œ (TF-IDF):</strong><br>
            â€¢ ì°¨íŠ¸ê°€ ë¡œë“œë˜ë©´ ë§‰ëŒ€ê°€ ì•„ë˜ì—ì„œ ìœ„ë¡œ ì˜¬ë¼ê°€ëŠ” ì• ë‹ˆë©”ì´ì…˜ì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤<br>
            â€¢ ê° ë§‰ëŒ€ì— ë§ˆìš°ìŠ¤ë¥¼ ì˜¬ë ¤ë³´ì„¸ìš” - ìƒì„¸ ì •ë³´ê°€ í‘œì‹œë©ë‹ˆë‹¤<br>
            â€¢ hover ì‹œ í•´ë‹¹ ë§‰ëŒ€ê°€ ê°•ì¡°ë˜ê³  ë‹¤ë¥¸ ë§‰ëŒ€ëŠ” íë ¤ì§‘ë‹ˆë‹¤
        </p>
        
        <h2 style="margin-top: 60px;">Latent Semantic Indexing (LSI)</h2>
        
        <div id="lsi_plot" style="width:100%; height:600px; margin: 30px auto; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.08); background: linear-gradient(135deg, #fef3c7 0%, #ffffff 100%); padding: 20px;"></div>
        
        <p style="margin-top: 30px; padding: 20px; background: #fef3c7; border-radius: 8px; border-left: 4px solid #f59e0b;">
            <strong>ğŸ”® ì¸í„°ë™ì…˜ ê°€ì´ë“œ (LSI):</strong><br>
            â€¢ 3D ê³µê°„ì—ì„œ ë¬¸ì„œë“¤ì´ ì›ì ì—ì„œ í©ì–´ì§€ëŠ” ì• ë‹ˆë©”ì´ì…˜ì„ í™•ì¸í•˜ì„¸ìš”<br>
            â€¢ ë§ˆìš°ìŠ¤ë¡œ ë“œë˜ê·¸í•´ì„œ 3D ì°¨íŠ¸ë¥¼ íšŒì „ì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤<br>
            â€¢ ê° ì ì— ë§ˆìš°ìŠ¤ë¥¼ ì˜¬ë¦¬ë©´ ë¬¸ì„œ ì •ë³´ê°€ í‘œì‹œë©ë‹ˆë‹¤<br>
            â€¢ ì°¨íŠ¸ë¥¼ í´ë¦­í•˜ë©´ ìë™ íšŒì „ì´ ì‹œì‘/ì¤‘ì§€ë©ë‹ˆë‹¤<br>
            â€¢ ê°™ì€ ìƒ‰ìƒì˜ ì ë“¤ì€ ê°™ì€ ì£¼ì œì˜ ë¬¸ì„œì…ë‹ˆë‹¤
        </p>
    </div>
    
    <script src="https://cdn.plot.ly/plotly-2.30.0.min.js" charset="utf-8"></script>
    <script>
    (function() {
      function createChart() {
        const words = ["data", "model", "topic", "bayes", "graph", "markov"];
        const weights = [0.35, 0.25, 0.10, 0.05, 0.15, 0.10];
        
        // ë‹¨ì–´ë³„ ì„¤ëª… ì¶”ê°€
        const descriptions = {
          "data": "ë°ì´í„°ì…‹ì—ì„œ ê°€ì¥ ì¤‘ìš”í•œ í‚¤ì›Œë“œ",
          "model": "ëª¨ë¸ë§ ê´€ë ¨ í•µì‹¬ ìš©ì–´",
          "topic": "ì£¼ì œ ëª¨ë¸ë§ì˜ ì¤‘ì‹¬ ê°œë…",
          "bayes": "ë² ì´ì¦ˆ í†µê³„ ê´€ë ¨ ìš©ì–´",
          "graph": "ê·¸ë˜í”„ êµ¬ì¡° í‘œí˜„",
          "markov": "ë§ˆë¥´ì½”í”„ ëª¨ë¸ ì°¸ì¡°"
        };
        
        const plotDiv = document.getElementById('tfidf_plot');
        if (!plotDiv) {
          console.error('Plot div not found');
          return;
        }
        
        if (typeof Plotly === 'undefined') {
          console.error('Plotly not loaded, retrying...');
          setTimeout(createChart, 100);
          return;
        }
        
        console.log('Creating animated TF-IDF chart...');
        
        // ê·¸ë¼ë°ì´ì…˜ ìƒ‰ìƒ ë°°ì—´
        const colors = weights.map(w => `rgba(96, 165, 250, ${0.5 + w})`);
        
        const trace = {
          type: 'bar',
          x: words,
          y: weights,
          text: weights.map(w => w.toFixed(2)),
          textposition: 'outside',
          textfont: {
            size: 14,
            color: '#1e3a8a',
            family: 'Roboto, sans-serif',
            weight: 600
          },
          marker: {
            color: colors,
            line: { 
              color: '#3b82f6', 
              width: 2 
            },
            opacity: 0.85
          },
          hoverinfo: 'text',
          hovertext: words.map((w, i) => 
            `<b>${w}</b><br>` +
            `TF-IDF Weight: ${weights[i].toFixed(3)}<br>` +
            `${descriptions[w]}`
          )
        };
        
        const layout = {
          title: { 
            text: 'ğŸ“Š TF-IDF Weight Distribution',
            font: { 
              size: 22,
              color: '#1e3a8a',
              family: 'Roboto, sans-serif',
              weight: 700
            },
            x: 0.5,
            xanchor: 'center'
          },
          xaxis: { 
            title: {
              text: 'Terms',
              font: { size: 16, color: '#475569', weight: 600 }
            },
            tickfont: { size: 14, color: '#64748b' },
            gridcolor: 'rgba(203, 213, 225, 0.3)',
            showline: true,
            linewidth: 2,
            linecolor: '#cbd5e1'
          },
          yaxis: { 
            title: {
              text: 'TF-IDF Weight',
              font: { size: 16, color: '#475569', weight: 600 }
            },
            tickfont: { size: 13, color: '#64748b' },
            range: [0, 0.42],
            gridcolor: 'rgba(203, 213, 225, 0.4)',
            showline: true,
            linewidth: 2,
            linecolor: '#cbd5e1',
            zeroline: true,
            zerolinecolor: '#94a3b8',
            zerolinewidth: 2
          },
          margin: { l: 80, r: 50, t: 90, b: 100 },
          plot_bgcolor: 'rgba(248, 250, 252, 0.5)',
          paper_bgcolor: 'rgba(0,0,0,0)',
          hovermode: 'closest',
          hoverlabel: {
            bgcolor: 'white',
            bordercolor: '#3b82f6',
            font: { 
              size: 14, 
              family: 'Roboto, sans-serif',
              color: '#1e293b'
            }
          },
          font: { family: 'Roboto, sans-serif' },
          showlegend: false
        };
        
        const config = {
          responsive: true,
          displayModeBar: true,
          displaylogo: false,
          modeBarButtonsToRemove: ['pan2d', 'lasso2d', 'select2d', 'autoScale2d'],
          toImageButtonOptions: {
            format: 'png',
            filename: 'tfidf_chart',
            height: 600,
            width: 900,
            scale: 2
          }
        };
        
        // ì°¨íŠ¸ ìƒì„± (ì´ˆê¸°ì—ëŠ” yê°’ì´ 0)
        const initialTrace = {...trace, y: weights.map(() => 0)};
        Plotly.newPlot(plotDiv, [initialTrace], layout, config).then(() => {
          console.log('Chart created, starting animation...');
          // ì˜¬ë¼ê°€ëŠ” ì• ë‹ˆë©”ì´ì…˜ íš¨ê³¼
          Plotly.animate(plotDiv, {
            data: [{y: weights}],
            traces: [0]
          }, {
            transition: {
              duration: 1200,
              easing: 'elastic-out'
            },
            frame: {
              duration: 1200,
              redraw: false
            }
          });
        });
        
        // hover ì‹œ ë§‰ëŒ€ í™•ëŒ€ íš¨ê³¼
        plotDiv.on('plotly_hover', function(data) {
          const pointIndex = data.points[0].pointIndex;
          const update = {
            'marker.line.width': weights.map((_, i) => i === pointIndex ? 3 : 2),
            'marker.opacity': weights.map((_, i) => i === pointIndex ? 1 : 0.7)
          };
          Plotly.restyle(plotDiv, update, [0]);
        });
        
        plotDiv.on('plotly_unhover', function() {
          const update = {
            'marker.line.width': 2,
            'marker.opacity': 0.85
          };
          Plotly.restyle(plotDiv, update, [0]);
        });
        
        console.log('Chart setup complete!');
      }
      
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', createChart);
      } else {
        createChart();
      }
    })();
    </script>
</body>
</html>